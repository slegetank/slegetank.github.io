
<!-- ?xml version="1.0" encoding="utf-8"? -->
<!-- 2017-08-26 Sat 16:18 -->
<meta http-equiv="Content-Type"
  content="text/html;charset=utf-8">

<title>Blog With Emacs</title>
<meta name="generator"
  content="Org mode">

<meta name="author"
  content="slegetank">

<link rel="stylesheet"
  type="text/css"
  href="../static/org.css">


<div id="preamble"
  class="status">

  <div id="header">
    <h1>Slegtank's Blog</h1>

    <ul id="nav">
      <li>
        <a href="https://gitlab.com/slegetank">GitLab</a>
      </li>
      <li>
        <a href="https://github.com/slegetank/">Github</a>
      </li>
      <li>
        <a href="../tag.html">Tags</a>
      </li>
      <li>
        <a href="../archive.html">Archive</a>
      </li>
      <li>
        <a href="../index.html">Home</a>
      </li>
    </ul>
  </div>
</div>

<div id="content">
  <h1 class="title">Blog With Emacs</h1>

  <div id="outline-container-org05a7224"
    class="outline-2">
    <h2 id="org05a7224">为什么</h2>

    <div class="outline-text-2"
      id="text-org05a7224">

      <p>为什么要用emacs写博客呢？网上有很多封装的很好的博客网站，提供了简单且丰富的编辑功能。对于我来说，理由有如下几点：
        <br>

      </p>

      <ul class="org-ul">
        <li>作为一个emacser，org mode写文章驾轻就熟
          <br>

        </li>
        <li>emacs是org mode最好的编辑器，而用org mode写文章简直是一种享受
          <br>

        </li>
        <li>只有纯文本的保存方式才是可靠的；别的博客网站会出问题，而静态的博客页绝不会
          <br>

        </li>
        <li>对于程序员来说，简单纯粹的文本记录方式才是我们追求的
          <br>

        </li>
      </ul>

      <p>因此，用emacs写博客对我来说是一种需要。
        <br>

      </p>
    </div>
  </div>

  <div id="outline-container-org2863c15"
    class="outline-2">
    <h2 id="org2863c15">资料</h2>

    <div class="outline-text-2"
      id="text-org2863c15">

      <ul class="org-ul">

        <li>wiki:
          <a href="http://orgmode.org/worg/org-blog-wiki.html">http://orgmode.org/worg/org-blog-wiki.html
          </a>
          <br>
          关于用org mode发布博客的你想知道或不想知道的信息都在这里了。
          <br>

        </li>

        <li>好文章，我借鉴了很多
          <br>

          <a href="http://bastibe.de/2013-11-13-blogging-with-emacs.html">http://bastibe.de/2013-11-13-blogging-with-emacs.html
          </a>
          <br>

        </li>

        <li>好文章，我借鉴了很多
          <br>

          <a href="https://ogbe.net/blog/blogging_with_org.html">https://ogbe.net/blog/blogging_with_org.html
          </a>
          <br>

        </li>
      </ul>
    </div>

    <div id="outline-container-orgb365374"
      class="outline-3">
      <h3 id="orgb365374">例子</h3>

      <div class="outline-text-3"
        id="text-orgb365374">

        <p>这里列出一些emacser博客的例子，以备查阅。
          <br>

        </p>

        <ul class="org-ul">
          <li>
            <a href="https://writequit.org">https://writequit.org</a>
            <br>

          </li>
          <li>
            <a href="http://tuhdo.github.io">http://tuhdo.github.io</a>
            <br>

          </li>
          <li>
            <a href="http://jixiuf.github.io">http://jixiuf.github.io</a>
            <br>

          </li>
          <li>
            <a href="http://oremacs.com">http://oremacs.com</a>
            <br>

          </li>
          <li>
            <a href="http://gongzhitaao.org/dotemacs/">http://gongzhitaao.org/dotemacs/
            </a>
            <br>

          </li>
        </ul>
      </div>
    </div>
  </div>

  <div id="outline-container-org31519cf"
    class="outline-2">
    <h2 id="org31519cf">基础</h2>

    <div class="outline-text-2"
      id="text-org31519cf">

      <p>用emacs写博客的实质就是编写org mode文件，然后通过emacs导出成为静态网站。因此，首先需要用户熟练使用org mode编写文档；当然，如果懂得elisp就可以做更多的自定义配置。
        <br>
        博客的发布是通过ox-publish这个库完成的，其中核心是
        <a href="http://orgmode.org/manual/Project-alist.html#Project-alist">org-publish-project-alist
        </a>这个alist; 关于博客发布的基础知识参照
        <a href="http://orgmode.org/manual/Publishing.html">这里</a>； 具体的例子可以参看我的
        <a href="https://github.com/slegetank/.emacs.d/blob/master/init/init-blog.org">emacs博客配置
        </a>。
        <br>

      </p>
    </div>
  </div>

  <div id="outline-container-org4a357e4"
    class="outline-2">
    <h2 id="org4a357e4">我的</h2>

    <div class="outline-text-2"
      id="text-org4a357e4">
    </div>

    <div id="outline-container-org7059102"
      class="outline-3">
      <h3 id="org7059102">结构</h3>

      <div class="outline-text-3"
        id="text-org7059102">

        <p>整个博客站的结构是这样的：
          <br>

        </p>

        <table border="2"
          cellspacing="0"
          cellpadding="6"
          rules="groups"
          frame="hsides">

          <colgroup>
            <col class="org-left">

            <col class="org-left">

          </colgroup>

          <tbody>

            <tr>
              <td class="org-left">draft</td>
              <td class="org-left">存放草稿</td>
            </tr>

            <tr>
              <td class="org-left">org</td>
              <td class="org-left">存放已发布的org</td>
            </tr>

            <tr>
              <td class="org-left">static</td>
              <td class="org-left">存放图片、css等静态资源</td>
            </tr>

            <tr>
              <td class="org-left">template</td>
              <td class="org-left">存放网页固定头部等模板html</td>
            </tr>

            <tr>
              <td class="org-left">index.org</td>
              <td class="org-left">首页</td>
            </tr>

            <tr>
              <td class="org-left">archive.org</td>
              <td class="org-left">按照时间排序的页面</td>
            </tr>

            <tr>
              <td class="org-left">tag.org</td>
              <td class="org-left">按照分类排序的页面</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div id="outline-container-org36a65bd"
      class="outline-3">
      <h3 id="org36a65bd">自定义sitemap</h3>

      <div class="outline-text-3"
        id="text-org36a65bd">

        <p>在使用中，我发现自己还是需要一个自定义的sitemap的–emacs提供的默认sitemap太简单了。自定义只要将函数名传入到":sitemap_function"，在生成网站的时候会自动调用。函数的原理很简单，就是遍历org目录下的所有文章，取到我们需要的文章属性信息，例如title/link/date等；然后将这些信息插入到一个指定的org文件里，例如作为首页的index.org或者sitemap.org，然后利用emacs将其导出成html。其中，对于每篇文章的preview的想法来自
          <a href="https://ogbe.net/blog/blogging_with_org.html">这里</a>。
          <br>

        </p>
      </div>
    </div>

    <div id="outline-container-org945be62"
      class="outline-3">
      <h3 id="org945be62">自定义功能</h3>

      <div class="outline-text-3"
        id="text-org945be62">
      </div>

      <div id="outline-container-org81912af"
        class="outline-4">
        <h4 id="org81912af">初始化(bi - blog init)</h4>

        <div class="outline-text-4"
          id="text-org81912af">

          <p>我的博客文章都有如下共性：
            <br>

          </p>

          <ul class="org-ul">
            <li>文件名为“时间戳+文章名.org”。
              <br>

            </li>
            <li>草稿文件保存在draft文件夹里。
              <br>

            </li>

            <li>文章具有一个通用的头部：
              <br>
              TITLE: 这个需要我自己填写
              <br>
              AUTHOR: 这个可以自动生成
              <br>
              EMAIL: 自动生成
              <br>
              DATE: 自动取到当前时间
              <br>
              SETUPFILE: 自动生成
              <br>
              BLOGTYPE: 文章的类型，需要我自己选
              <br>
              PREVIEW: 需要我自己填
              <br>

            </li>
          </ul>

          <p>因此，文章在初始化（bi）时，只需要我填写文件名:
            <br>

            <img src="../static/20170108-blogWithEmacs-0.png"
              alt="20170108-blogWithEmacs-0.png">

            <br>

          </p>

          <p>就会将文件自动生成在draft文件夹里，并且会自动生成默认的头部信息；其中，TITLE/PREVIEW需要手动填写，而blogtype可以按s-left/s-right从org文件夹中已经存在的文章的type里进行选择。
            <br>

            <img src="../static/20170108-blogWithEmacs-1.gif"
              alt="20170108-blogWithEmacs-1.gif">

            <br>

          </p>

          <p>这样，文章的初始化就完成了。
            <br>

          </p>
        </div>
      </div>

      <div id="outline-container-org1b2fda7"
        class="outline-4">
        <h4 id="org1b2fda7">草稿发布(bp - blog publish)</h4>

        <div class="outline-text-4"
          id="text-org1b2fda7">

          <p>草稿的发布就是将org文件从draft拷贝到org文件夹。这个命令就做了这件事，顺便问一下是否要将博客commit一下。
            <br>

          </p>
        </div>
      </div>

      <div id="outline-container-org0e2868e"
        class="outline-4">
        <h4 id="org0e2868e">博客生成(bc - blog commit)</h4>

        <div class="outline-text-4"
          id="text-org0e2868e">

          <p>我将org文件的导出以及commit做了一个整合，变成了这个命令。也就是将org文件导出生成html文件，然后使用固定格式的message提交更改。这样看起来提交的记录会变得非常整洁：
            <br>

            <img src="../static/20170108-blogWithEmacs-2.png"
              alt="20170108-blogWithEmacs-2.png">

            <br>

          </p>
        </div>
      </div>

      <div id="outline-container-org26683fd"
        class="outline-4">
        <h4 id="org26683fd">插入图片</h4>

        <div class="outline-text-4"
          id="text-org26683fd">

          <p>在org中插入图片用手输入的话太麻烦了，从
            <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/07/10/Drag-images-and-files-onto-org-mode-and-insert-a-link-to-them/">这里
            </a>我学到了可以通过拖拽的方式添加图片的链接。我做了一点修改：当发现当前org文件为博客文章时，将会自动把图片拷贝到static文件夹下，按照命名规则命名并递增序号，并且将相对路径添加到文件里。完美！
            <br>

            <img src="../static/20170108-blogWithEmacs-3.gif"
              alt="20170108-blogWithEmacs-3.gif">

            <br>

          </p>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-org1ba48a7"
    class="outline-2">
    <h2 id="org1ba48a7">结语</h2>

    <div class="outline-text-2"
      id="text-org1ba48a7">

      <p>用了上面的配置之后，用org mode写文档变得相当享受。Happy hacking。
        <br>

      </p>
    </div>
  </div>
</div>

<div id="postamble"
  class="status">
  <hr>

  <p>License:
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
  </p>
  <p>
    <a href="mailto:slegetank@163.com">Contact</a>
  </p>
</div>