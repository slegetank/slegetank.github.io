<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-03-12 Mon 01:41 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>如何优雅的使用Dired</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="slegetank" />
<link rel="stylesheet" type="text/css" href="../static/org.css" />
</head>
<body>
<div id="preamble" class="status">
<div id="header">
  <h1>Slegtank's Blog</h1>
  <ul id="nav">
      <li><a href="https://gitlab.com/slegetank">GitLab</a></li>
    <li><a href="https://github.com/slegetank/">Github</a></li>
    <li><a href="../tag.html">Tags</a></li>
    <li><a href="../archive.html">Archive</a></li>
    <li><a href="../index.html">Home</a></li>
  </ul>
</div>
</div>
<div id="content">
<h1 class="title">如何优雅的使用Dired</h1>
<p>
Dired是directory editor的简写，是emacs内置的目录管理工具。习惯之后真的灰常强大，有些黑科技让我叹为观止。<br />
这里是我的配置：<a href="https://github.com/slegetank/.emacs.d/blob/master/init/init-dired.org">Dired config</a> 。<br />
</p>

<div id="outline-container-org047f91b" class="outline-2">
<h2 id="org047f91b">为什么</h2>
<div class="outline-text-2" id="text-org047f91b">
<ul class="org-ul">
<li>emacs内置，可以与文件编辑无缝操作。<br /></li>
<li>在批量操作的时候很方便；正则、wdired很强大。<br /></li>
</ul>
<p>
当然，如果你不是emacser，这些都不是必要的条件；反之，这就是你的强大助手&#x2013;就像emacs其他强大的特性一样，你需要花费时间去了解他们。<br />
</p>
</div>
</div>

<div id="outline-container-orgc55fbae" class="outline-2">
<h2 id="orgc55fbae">快捷键</h2>
<div class="outline-text-2" id="text-orgc55fbae">
<p>
首先要记一下一些常用的快捷键。<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">key</td>
<td class="org-left">function</td>
</tr>

<tr>
<td class="org-left">(</td>
<td class="org-left">显示、隐藏详细信息</td>
</tr>

<tr>
<td class="org-left">s</td>
<td class="org-left">排序</td>
</tr>

<tr>
<td class="org-left">q</td>
<td class="org-left">退出</td>
</tr>

<tr>
<td class="org-left">C, %C</td>
<td class="org-left">copy</td>
</tr>

<tr>
<td class="org-left">R, %R</td>
<td class="org-left">重命名</td>
</tr>

<tr>
<td class="org-left">d, %d</td>
<td class="org-left">添加删除标记</td>
</tr>

<tr>
<td class="org-left">D</td>
<td class="org-left">删除</td>
</tr>

<tr>
<td class="org-left">+</td>
<td class="org-left">创建路径</td>
</tr>

<tr>
<td class="org-left">Z</td>
<td class="org-left">压缩、解压缩文件</td>
</tr>

<tr>
<td class="org-left">o</td>
<td class="org-left">在另一个窗口打开</td>
</tr>

<tr>
<td class="org-left">m, %m</td>
<td class="org-left">标记, 例如\.org将会标记目录下所有org mode文件</td>
</tr>

<tr>
<td class="org-left">%g</td>
<td class="org-left">根据文件的内容是否包含正则标记文件</td>
</tr>

<tr>
<td class="org-left">u</td>
<td class="org-left">去除标记</td>
</tr>

<tr>
<td class="org-left">U</td>
<td class="org-left">去除所有标记</td>
</tr>

<tr>
<td class="org-left">^</td>
<td class="org-left">上一层目录</td>
</tr>

<tr>
<td class="org-left">*.</td>
<td class="org-left">标记所有后缀名为xx的文件</td>
</tr>

<tr>
<td class="org-left">V</td>
<td class="org-left">区域选择</td>
</tr>
</tbody>
</table>
<p>
% 表示正则相关的操作，极大的增强了原命令的功能。<br />
</p>
</div>
<div id="outline-container-org377b113" class="outline-3">
<h3 id="org377b113">自定义快捷键</h3>
<div class="outline-text-3" id="text-org377b113">
<ul class="org-ul">
<li><p>
外部<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">key</td>
<td class="org-left">function</td>
</tr>

<tr>
<td class="org-left">dd/do</td>
<td class="org-left">打开当前文件所在的目录/在另一个窗口打开</td>
</tr>

<tr>
<td class="org-left">dr</td>
<td class="org-left">打开最近访问的路径</td>
</tr>

<tr>
<td class="org-left">df</td>
<td class="org-left">打开Mac的Finder所打开的路径</td>
</tr>

<tr>
<td class="org-left">dx</td>
<td class="org-left">打开XCode工程所在的目录并且打开magit窗口</td>
</tr>

<tr>
<td class="org-left">fx</td>
<td class="org-left">打开XCode所编辑的文件</td>
</tr>

<tr>
<td class="org-left">dm</td>
<td class="org-left">打开书签所标记的路径</td>
</tr>
</tbody>
</table></li>
<li><p>
内部<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">key</td>
<td class="org-left">function</td>
</tr>

<tr>
<td class="org-left">O</td>
<td class="org-left">以MacOS默认的行为打开文件</td>
</tr>

<tr>
<td class="org-left">V</td>
<td class="org-left">区域选择</td>
</tr>

<tr>
<td class="org-left">E</td>
<td class="org-left">wdired</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org76e21ae" class="outline-2">
<h2 id="org76e21ae">Better defaults</h2>
<div class="outline-text-2" id="text-org76e21ae">
</div>
<div id="outline-container-orgcd245a8" class="outline-3">
<h3 id="orgcd245a8">单个buffer</h3>
<div class="outline-text-3" id="text-orgcd245a8">
<p>
dired默认情况下每个目录会单独开一个buffer，而这是我们所不希望看到的；有几种方法进行改变：<br />
</p>
<ul class="org-ul">
<li><p>
自己改<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> dired-recursive-copies 'always<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> dired-recursive-deletes 'always<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> dired-dwim-target t<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span>put 'dired-find-alternate-file 'disabled nil<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">with-eval-after-load</span> 'dired
    <span style="color: #93a8c6;">(</span>define-key dired-mode-map <span style="color: #b0b1a3;">(</span>kbd <span style="color: #a3be8c;">"RET"</span><span style="color: #b0b1a3;">)</span> 'dired-find-alternate-file<span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span>define-key dired-mode-map <span style="color: #b0b1a3;">(</span>kbd <span style="color: #a3be8c;">"^"</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #b48ead;">lambda</span> <span style="color: #97b098;">()</span> <span style="color: #97b098;">(</span><span style="color: #b48ead;">interactive</span><span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>find-alternate-file <span style="color: #a3be8c;">".."</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>  <span style="color: #c0c5ce;">; </span><span style="color: #65737e;">was dired-up-directory)</span>
</pre>
</div></li>
<li><a href="https://github.com/crocket/dired-single">dired-single</a><br /></li>
<li><p>
<a href="https://www.emacswiki.org/emacs/dired+.el">dired+</a><br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span>diredp-toggle-find-file-reuse-dir 1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orge73d4f3" class="outline-3">
<h3 id="orge73d4f3">拷贝</h3>
<div class="outline-text-3" id="text-orge73d4f3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> dired-dwim-target t<span style="color: #8c8c8c;">)</span>
</pre>
</div>
<p>
如果其他窗口也为dired mode，会以其为目标路径拷贝文件。<br />
</p>
</div>
</div>
<div id="outline-container-orga687443" class="outline-3">
<h3 id="orga687443">过滤</h3>
<div class="outline-text-3" id="text-orga687443">
<p>
有些系统生成的文件我们并不希望看到，例如python的pyc文件，这时可以忽略：<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq-default</span> dired-omit-files-p t<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> dired-omit-files
      <span style="color: #93a8c6;">(</span>concat dired-omit-files <span style="color: #a3be8c;">"\\.pyc$"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgac1fe26" class="outline-3">
<h3 id="orgac1fe26">默认递归操作文件夹</h3>
<div class="outline-text-3" id="text-orgac1fe26">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> dired-recursive-copies 'always<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> dired-recursive-deletes 'always<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4ced69d" class="outline-2">
<h2 id="org4ced69d">排序</h2>
<div class="outline-text-2" id="text-org4ced69d">
<p>
emacs原始的排序只有根据字符和modify time进行排序；有一个插件<a href="https://www.emacswiki.org/emacs/download/dired-sort.el">dired-sort</a> 允许用户根据自己的需要进行排序。但是其中的根据后缀名排序只支持GNU版本的ls；所以对于MacOS及其他系统，最简单的方法是使用elisp版本的ls：<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">require</span> '<span style="color: #d08770;">ls-lisp</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> ls-lisp-use-insert-directory-program nil<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> ls-lisp-verbosity nil<span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
并且，我希望文件夹能处在文件的前面：<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">defun</span> <span style="color: #8fa1b3;">custom-dired-sort-dir-first</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #a3be8c;">"Dired sort hook to list directories first."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">save-excursion</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #b48ead;">let</span> <span style="color: #97b098;">(</span>buffer-read-only<span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>forward-line 2<span style="color: #97b098;">)</span> <span style="color: #c0c5ce;">;; </span><span style="color: #65737e;">beyond dir. header</span>
      <span style="color: #97b098;">(</span>sort-regexp-fields t <span style="color: #a3be8c;">"^.*$"</span> <span style="color: #a3be8c;">"[ ]*."</span> <span style="color: #aebed8;">(</span>point<span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span>point-max<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">and</span> <span style="color: #b0b1a3;">(</span><span style="color: #b48ead;">featurep</span> '<span style="color: #d08770;">xemacs</span><span style="color: #b0b1a3;">)</span>
       <span style="color: #b0b1a3;">(</span>fboundp 'dired-insert-set-properties<span style="color: #b0b1a3;">)</span>
       <span style="color: #b0b1a3;">(</span>dired-insert-set-properties <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>set-buffer-modified-p nil<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span>add-hook 'dired-after-readin-hook 'custom-dired-sort-dir-first<span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
这样，我们就可以自定义排序了，具体效果是这样的：<br />
<img src="../static/20170106-dired-0.gif" alt="20170106-dired-0.gif" /><br />
</p>
</div>
</div>
<div id="outline-container-orgaaa9196" class="outline-2">
<h2 id="orgaaa9196">书签</h2>
<div class="outline-text-2" id="text-orgaaa9196">
<p>
跟书签配合之后，在访问远程路径的时候特别方便。借鉴了这篇文章：<a href="http://scottfrazersblog.blogspot.sg/2009/12/emacs-using-bookmarked-directories.html">Emacs: Using Bookmarked Directories</a>。<br />
如果TRAMP配置合适的话，可以达到一键远程访问的效果：<br />
<img src="../static/20170106-dired-2.gif" alt="20170106-dired-2.gif" /><br />
</p>
</div>
</div>
<div id="outline-container-org93e65ad" class="outline-2">
<h2 id="org93e65ad">wdired</h2>
<div class="outline-text-2" id="text-org93e65ad">
<p>
这个功能就很黑魔法了。我把它绑定到了“E”，C-c C-c确认修改；C-c C-k放弃修改。这个功能允许用户像操作普通文件那样操作目录，例如批量重命名：<br />
<img src="../static/20170106-dired-1.gif" alt="20170106-dired-1.gif" /><br />
</p>

<p>
当操作不是很复杂的时候可以用正则来匹配操作，而当比较复杂的时候就可以用这个功能了，高效、强大。<br />
</p>
</div>
</div>

<div id="outline-container-org443940a" class="outline-2">
<h2 id="org443940a">最近访问</h2>
<div class="outline-text-2" id="text-org443940a">
<p>
打开最近访问的目录是比较常用的一个功能。在shell里也有<a href="https://github.com/rupa/z">z</a>、 <a href="https://github.com/clvv/fasd">fasd</a> 这些快速打开路径的命令。而emacs内置的recentf则可为我们提供方便的最近访问路径功能，当然还是需要一些配置才能变得更好用。这里是<a href="https://www.emacswiki.org/emacs/RecentFiles#toc21">wiki</a> 。<br />
对于这个问题我最初查到的答案在这里：<a href="http://blog.binchen.org/posts/use-ivy-to-open-recent-directories.html">陈斌的解决方案</a> 。因此很简单的，我把其中fasd的部分去掉就可以用了：<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">require</span> '<span style="color: #d08770;">ivy</span><span style="color: #8c8c8c;">)</span> <span style="color: #c0c5ce;">; </span><span style="color: #65737e;">swiper 7.0+ should be installed</span>

<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">defun</span> <span style="color: #8fa1b3;">custom-goto-recent-directory</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #a3be8c;">"Open recent directory with dired"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">unless</span> recentf-mode <span style="color: #b0b1a3;">(</span>recentf-mode 1<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">let</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>collection
         <span style="color: #aebed8;">(</span>delete-dups
          <span style="color: #b0b0b3;">(</span>append <span style="color: #90a890;">(</span>mapcar 'file-name-directory recentf-list<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>ivy-read <span style="color: #a3be8c;">"directories:"</span> collection <span style="color: #d08770;">:action</span> 'dired<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
但是后来使用中发现了几个问题，在这里附上解决方案：<br />
</p>
<ol class="org-ol">
<li><p>
dired访问的路径并不会被添加到最近访问里<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">defun</span> <span style="color: #8fa1b3;">recentd-track-opened-file</span> <span style="color: #93a8c6;">()</span>
    <span style="color: #a3be8c;">"Insert the name of the directory just opened into the recent list."</span>
    <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">and</span> <span style="color: #b0b1a3;">(</span>derived-mode-p 'dired-mode<span style="color: #b0b1a3;">)</span> default-directory
        <span style="color: #b0b1a3;">(</span>recentf-add-file default-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #c0c5ce;">;; </span><span style="color: #65737e;">Must return nil because it is run from `</span><span style="color: #d08770;">write-file-functions</span><span style="color: #65737e;">'.</span>
    nil<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">defun</span> <span style="color: #8fa1b3;">recentd-track-closed-file</span> <span style="color: #93a8c6;">()</span>
    <span style="color: #a3be8c;">"Update the recent list when a dired buffer is killed.</span>
<span style="color: #a3be8c;">That is, remove a non kept dired from the recent list."</span>
    <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">and</span> <span style="color: #b0b1a3;">(</span>derived-mode-p 'dired-mode<span style="color: #b0b1a3;">)</span> default-directory
        <span style="color: #b0b1a3;">(</span>recentf-remove-if-non-kept default-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span>add-hook 'dired-after-readin-hook 'recentd-track-opened-file<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>add-hook 'kill-buffer-hook 'recentd-track-closed-file<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>
<li><p>
使用org-publish发布静态博客时，生成的html路径会把recentf-list塞满<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">defsubst</span> <span style="color: #8fa1b3;">file-was-visible-p</span> <span style="color: #93a8c6;">(</span>file<span style="color: #93a8c6;">)</span>
    <span style="color: #a3be8c;">"Return non-nil if FILE's buffer exists and has been displayed."</span>
    <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">let</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>buf <span style="color: #aebed8;">(</span>find-buffer-visiting file<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #b48ead;">if</span> buf
        <span style="color: #97b098;">(</span><span style="color: #b48ead;">let</span> <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>display-count <span style="color: #90a890;">(</span>buffer-local-value 'buffer-display-count buf<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
            <span style="color: #aebed8;">(</span><span style="color: #b48ead;">if</span> <span style="color: #b0b0b3;">(</span>&gt; display-count 0<span style="color: #b0b0b3;">)</span> display-count nil<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">let</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>r-list recentf-list<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span><span style="color: #b48ead;">defsubst</span> <span style="color: #8fa1b3;">keep-default-old-and-visible-recentf-p</span> <span style="color: #b0b1a3;">(</span>file<span style="color: #b0b1a3;">)</span>
    <span style="color: #a3be8c;">"Decide whether to keep file in recentf-list.</span>
<span style="color: #a3be8c;">    Return non-nil if recentf would, by default, keep FILE, and</span>
<span style="color: #a3be8c;">    either FILE name was loaded from recentf file on disk or FILE</span>
<span style="color: #a3be8c;">    has been displayed in this session."</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #b48ead;">if</span> <span style="color: #97b098;">(</span>recentf-keep-default-predicate file<span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span><span style="color: #b48ead;">or</span> <span style="color: #aebed8;">(</span>member file r-list<span style="color: #aebed8;">)</span>
            <span style="color: #aebed8;">(</span>file-was-visible-p file<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setf</span> recentf-keep '<span style="color: #93a8c6;">(</span>keep-default-old-and-visible-recentf-p<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div></li>
<li><p>
TRAMP访问时路径不会出现在recentf-list里<br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">require</span> '<span style="color: #d08770;">recentf</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #b48ead;">setq</span> recentf-auto-cleanup 'never<span style="color: #8c8c8c;">)</span> <span style="color: #c0c5ce;">;; </span><span style="color: #65737e;">disable before we start recentf!</span>
<span style="color: #8c8c8c;">(</span>recentf-mode 1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>
</ol>

<p>
我把它绑定到了dr上:<br />
<img src="../static/20170106-dired-3.gif" alt="20170106-dired-3.gif" /><br />
</p>
</div>
</div>

<div id="outline-container-org3ac376b" class="outline-2">
<h2 id="org3ac376b">参考</h2>
<div class="outline-text-2" id="text-org3ac376b">
<p>
emacsist: <a href="http://mp.weixin.qq.com/s/73rHOjCF8Ot1kZdJuU6tgQ">Emacs文件管理神器&#x2013;dired常用操作说明</a><br />
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr />

                <p>License: <a href= "https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></p>

                <p><a href= "mailto:slegetank@163.com"> Contact</a></p>
</div>
</body>
</html>
